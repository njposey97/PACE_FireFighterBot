// ARDUINO CODE for Tofumo (Sumo bot) 
#include <ArduinoRobot.h>


//List Constants here
const int IR_ARRAY[] = {}
const int motor_speed = 250;
		//ETC.
//End Listing Constants

// List Variables here
bool enemy_NotDetected = true;
int motor_degree = 0;
//End Listing Variables

// List Functions here

// Moves robot straight ahead (with respect to front)
void move_straight()
{
  digitalWrite(8, HIGH);
  digitalWrite(7, LOW);
  //Control Speed
  analogWrite(9, motor_speed);
  delay(1000);
}

// Moves robot backwards (with respect to front)
void move_backward()
{
  digitalWrite(8, LOW);
  digitalWrite(7, HIGH);
  //control Speed
  analogWrite(9, motor_speed); //pin 9 pulse modulation (variable speed)
  delay(1000);
}

// Turns robot to left
void turn_left()
{
    Robot.turn(motor_degree); //make bot turn 90 degrees left
    delay(1000);
}

// Turns robot to right
void turn_right()
{
    Robot.turn(motor_degree); //make bot turn 90 degrees right
    delay(1000);
}

void turn_180()
{
    Robot.turn(180); //make bot turn 180 degrees right
    delay(1000);
}

void ir_enemy_charge(){
	while(IR_ARRAY[0] == HIGH || IR_ARRAY[1] == HIGH){
  	move_straight();
  }
  //If Enemy leaves... return to triangular movement
  loop();
}

void ir_enemy_detect(){
	//Determine while IR sensor was triggered HIGH
  //Make that IR sensor the condition for the loop
  //Assuming IR_ARRAY[0] and IR_ARRAY[1] are the true front
  if(IR_ARRAY[0] == HIGH || IR_ARRAY[1] == HIGH){
  	ir_enemy_charge();
  }
  //Assuming right side
  else if(IR_ARRAY[2] == HIGH || IR_ARRAY[3] == HIGH){
		turn_left();  	
  }
  //Assuming left side
  else if(IR_ARRAY[4] == HIGH || IR_ARRAY[5] == HIGH){
  	turn_right();
  }
  //Assuming back side
  else if(IR_ARRAY[6] == HIGH || IR_ARRAY[7] == HIGH){
  	turn_180();
  }
	
}
void ir_line_detect(){
	
}
//End Listing Functions






void setup() {
  // put your setup code here, to run once:
  attachInterrupt(digitalPinToInterrupt(), ir_enemy_detect, RISING)		//Because intterrupt can only detect RISING edge on MEGA board, must check condition continuously in function
  attachInterrupt(digitalPinToInterrupt(), ir_line_detect, RISING)		
  
  // Initialize pins for IR sensors
  pinMode(IR_ARRAY[0], ); // Front
  pinMode(IR_ARRAY[1], ); // Front
  
  pinMode(IR_ARRAY[2], ); // Left
  pinMode(IR_ARRAY[3], ); // Left
  
  pinMode(IR_ARRAY[4], ); // Right
  pinMode(IR_ARRAY[5], ); // Right
  
  pinMode(IR_ARRAY[6], ); // Back
  pinMode(IR_ARRAY[7], ); // Back
  
  // motor pins
  
  Robot.begin();

  
  pinMode(9, OUTPUT);
  pinMode(10, OUTPUT);
  pinMode(10, OUTPUT);
}




void loop() {
  // put your main code here, to run repeatedly:


	// As long as enemy is not detected, continue moving in triangular fashion
  // (until enemy is sighted)
	while (enemy_NotDetected) 
  {
  
  	motor_degree=60;
  	// Move 
  	move_straight();
    // Turn 60 deg left
    turn_left(); // LEFT		
  }
  
  
	// if enemy is detected => then IR_Interrupt Enemy
  	// Align front with enemy
    
  	// Charge && stay aligned && make sure that robot is within bounds of sumo ring
    
    
    
  // if sumo ring bounds are detected => IR_Interrupt Lines/Bounds
  	// Disable enemy detection
    
    // Move backwards
    
    // Rotate 180
    
    // Re-enable enemy detection
  
}




